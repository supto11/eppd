"use strict";(self.webpackChunke_pos_point_dashboard=self.webpackChunke_pos_point_dashboard||[]).push([[186],{8436:(U,v,l)=>{l.d(v,{lk:()=>S,GI:()=>O,LR:()=>o});class a{constructor({id:i="",companyId:D="",locationId:n="",terminalId:e="",parentCategoryId:m="",name:p="",backColor:y="#ffffff",textColor:C="#000000",taxRate:A="",profitMargin:E="",sort:g="",isAsDepartment:_=!1,isShowOnScreen:d=!1,isAsSubCategory:c=!1,isAgeLimit:f=!1,isMergeItem:P=!1,isPriceLevel:r=!1,isSerialProduct:t=!1,picturePath:s="",isActive:u=!0,isNew:x=!1,isUpdated:I=!1,createdBy:L="",createdOn:w=new Date,updatedBy:M="",updatedOn:b=new Date}={}){this.id=i,this.companyId=D,this.locationId=n,this.terminalId=e,this.parentCategoryId=m,this.name=p,this.backColor=y,this.textColor=C,this.taxRate=A,this.profitMargin=E,this.sort=g,this.isAsDepartment=_,this.isShowOnScreen=d,this.isAsSubCategory=c,this.isAgeLimit=f,this.isMergeItem=P,this.isPriceLevel=r,this.isSerialProduct=t,this.picturePath=s,this.isActive=u,this.isNew=x,this.isUpdated=I,this.createdBy=L,this.createdOn=w,this.updatedBy=M,this.updatedOn=b}}class S{constructor({data:i,controls:D,loaded:n=!1,loading:e=!1,error:m=null}){this.data=i,this.controls=D,this.loaded=n,this.loading=e,this.error=m}}const O={id:null,companyCode:null,locationId:"",terminalId:"",parentCategoryCode:"",name:"",backColor:"#ffffff",textColor:"#000000",taxRate:0,profitMargin:0,sort:0,isAsDepartment:!1,isShowOnScreen:!1,isAsSubCategory:!1,isAgeLimit:!1,isMergeItem:!1,isPriceLevel:!1,isSerialProduct:!1,picturePath:"",isActive:!0,isNew:null,isUpdated:null,createdBy:"",createdOn:null,updatedBy:"",updatedOn:null};class o{static fromJson(i){return new a({id:i.id.trim(),companyId:i.companyCode.trim(),locationId:i.locationId.trim(),terminalId:i.terminalId.trim(),parentCategoryId:i.parentCategoryId?i.parentCategoryId.trim():"",name:i.name,backColor:i.backColor,textColor:i.textColor,taxRate:i.taxRate,profitMargin:i.profitMargin,sort:i.sort,isAsDepartment:i.isAsDepartment,isShowOnScreen:i.isShowOnScreen,isAsSubCategory:i.isAsSubCategory,isAgeLimit:i.isAgeLimit,isMergeItem:i.isMergeItem,isPriceLevel:i.isPriceLevel,isSerialProduct:i.isSerialProduct,picturePath:i.picturePath,isActive:i.isActive,isNew:i.isNew,isUpdated:i.isUpdated,createdBy:i.createdBy,createdOn:i.createdOn,updatedBy:i.updatedBy,updatedOn:i.updatedOn})}static toJson(i){return{id:i.id,companyCode:i.companyId,locationId:i.locationId,terminalId:i.terminalId,parentCategoryId:i.parentCategoryId,name:i.name,backColor:i.backColor,textColor:i.textColor,taxRate:i.taxRate,profitMargin:i.profitMargin,sort:i.sort,isAsDepartment:i.isAsDepartment,isShowOnScreen:i.isShowOnScreen,isAsSubCategory:i.isAsSubCategory,isAgeLimit:i.isAgeLimit,isMergeItem:i.isMergeItem,isPriceLevel:i.isPriceLevel,isSerialProduct:i.isSerialProduct,picturePath:i.picturePath,isActive:i.isActive,isNew:i.isNew,isUpdated:i.isUpdated,createdBy:i.createdBy,createdOn:i.createdOn,updatedBy:i.updatedBy,updatedOn:i.updatedOn}}}},8449:(U,v,l)=>{l.d(v,{C1:()=>S,yo:()=>O,mR:()=>o,D5:()=>h,IC:()=>i});class a{constructor({id:e="",companyId:m="",locationId:p="",terminalId:y="",brandId:C="",categoryId:A="",subCategoryId:E="",groupId:g="",departmentId:_="",supplierId:d="",name:c="",shortName:f="",barCode:P="",barCodeType:r="",businessLocation:t="",transactionUnit:s="",alertQuantity:u="",taxMethod:x="",taxRate:I="",purchasePriceExcludeTax:L="",purchasePriceIncludeTax:w="",saleMargin:M="",salePriceExcludeTax:b="",sku:T="",expiryDate:B="",expiryAlertDays:k="",expiryAlertType:N="",currentOffer:Q="",currentOfferSalePrice:R="",offerStartDate:$="",offerEndDate:F="",offerDays:W="",manufacturerPartNumber:K="",supplierPartNumber:G="",warrantyDays:z="",modelNumber:H="",weight:J="",description:X="",image:Y="https://picsum.photos/200",currentStock:V="",reorderingQuantity:Z="",minimumStock:q="",maximumStock:j="",labelFormat:ee="",packedByDate:te="",useByDate:ie="",sellByDate:ae="",lot:re="",notForSellingQuantity:se="",isContainsAllergen:ne="",isShowAllergenOnCart:le="",isShowAllergenOnSecondaryDisplay:oe="",isShowAllergenPopUp:ce="",rack:de="",row:ue="",position:he="",frontLocation:fe="",backLocation:pe="",pluCode:_e="",salePrice:me="",turnOut:ge="",productType:Pe="",baseUnit:ye="",transactionUnitMultiplier:Se="",saleAccount:De="",saleDiscountAccount:Oe="",isMaintainStock:Ce="",inventoryAccount:xe="",purchasePrice:ve="",expenseAccount:Ae="",purchaseDiscountAccount:Ee="",foreignLanguageName:Ie="",kitchenPrintDescription:Ue="",isActive:Le=!1,isTaxOnSale:we=!1,isTaxOnPurchase:Me=!1,isMergeItem:be=!1,isAgeRestricted:Te=!1,isPriceLevels:Be=!1,isOpenCustomizationWindow:ke=!1,isPLUIsNegative:Ne=!1,isCondimentPLU:Qe=!1,isEnableSELPrinting:Re=!1,isOpenPricePLU:$e=!1,isOpenTextPLU:Fe=!1,isExcludeFromDiscount:We=!1,isExcludeServiceCharges:Ke=!1,isSerialProduct:Ge=!1,isShowPortionFront:ze=!1,isAllow:He=!1,isAllowNegativeStock:Je=!1,isUnitPriceOverride:Xe=!1,isNew:Ye=!1,isUpdated:Ve=!1,createdBy:Ze="",createdOn:qe=null,updatedBy:je="",updatedOn:et=null}={}){this.id=e,this.companyId=m,this.locationId=p,this.terminalId=y,this.brandId=C,this.categoryId=A,this.subCategoryId=E,this.groupId=g,this.departmentId=_,this.supplierId=d,this.name=c,this.shortName=f,this.barCode=P,this.barCodeType=r,this.businessLocation=t,this.transactionUnit=s,this.alertQuantity=u,this.taxMethod=x,this.taxRate=I,this.purchasePriceExcludeTax=L,this.purchasePriceIncludeTax=w,this.saleMargin=M,this.salePriceExcludeTax=b,this.sku=T,this.expiryDate=B,this.expiryAlertDays=k,this.expiryAlertType=N,this.currentOffer=Q,this.currentOfferSalePrice=R,this.offerStartDate=$,this.offerEndDate=F,this.offerDays=W,this.manufacturerPartNumber=K,this.supplierPartNumber=G,this.warrantyDays=z,this.modelNumber=H,this.weight=J,this.description=X,this.image=Y,this.currentStock=V,this.reorderingQuantity=Z,this.minimumStock=q,this.maximumStock=j,this.labelFormat=ee,this.packedByDate=te,this.useByDate=ie,this.sellByDate=ae,this.lot=re,this.notForSellingQuantity=se,this.isContainsAllergen=ne,this.isShowAllergenOnCart=le,this.isShowAllergenOnSecondaryDisplay=oe,this.isShowAllergenPopUp=ce,this.rack=de,this.row=ue,this.position=he,this.frontLocation=fe,this.backLocation=pe,this.pluCode=_e,this.salePrice=me,this.turnOut=ge,this.productType=Pe,this.baseUnit=ye,this.transactionUnitMultiplier=Se,this.saleAccount=De,this.saleDiscountAccount=Oe,this.isMaintainStock=Ce,this.inventoryAccount=xe,this.purchasePrice=ve,this.expenseAccount=Ae,this.purchaseDiscountAccount=Ee,this.foreignLanguageName=Ie,this.kitchenPrintDescription=Ue,this.isActive=Le,this.isTaxOnSale=we,this.isTaxOnPurchase=Me,this.isMergeItem=be,this.isAgeRestricted=Te,this.isPriceLevels=Be,this.isOpenCustomizationWindow=ke,this.isPLUIsNegative=Ne,this.isCondimentPLU=Qe,this.isEnableSELPrinting=Re,this.isOpenPricePLU=$e,this.isOpenTextPLU=Fe,this.isExcludeFromDiscount=We,this.isExcludeServiceCharges=Ke,this.isSerialProduct=Ge,this.isShowPortionFront=ze,this.isAllow=He,this.isAllowNegativeStock=Je,this.isUnitPriceOverride=Xe,this.isNew=Ye,this.isUpdated=Ve,this.createdBy=Ze,this.createdOn=qe,this.updatedBy=je,this.updatedOn=et}}class S{static fromJson(e){return new a({id:`${e.id}`.trim(),companyId:`${e.companyCode}`.trim(),locationId:`${e.locationId}`.trim(),terminalId:`${e.terminalId}`.trim(),brandId:`${e.brand}`.trim(),categoryId:`${e.category}`.trim(),subCategoryId:`${e.subCategory}`.trim(),groupId:`${e.group}`.trim(),departmentId:`${e.department}`.trim(),supplierId:`${e.supplier}`.trim(),name:e.productName,shortName:e.shortName,barCode:e.barcode,barCodeType:e.barcodeType,businessLocation:e.businessLocation,transactionUnit:e.transactionUnit,alertQuantity:e.alertQuantity,taxMethod:e.taxMethod,taxRate:e.taxRate,purchasePriceExcludeTax:e.purchasePriceExcludingTax,purchasePriceIncludeTax:e.purchasePriceIncludingTax,saleMargin:e.saleMargin,salePriceExcludeTax:e.salePriceExcTax,sku:e.sku,expiryDate:e.expiryDate,expiryAlertDays:e.expiryAlertDays,expiryAlertType:e.expiryAlertType,currentOffer:e.currentOffier,currentOfferSalePrice:e.currentOfferSalePrice,offerStartDate:e.offerStartDate,offerEndDate:e.offerEndDate,offerDays:e.offerDays,manufacturerPartNumber:e.manufacturerPartNumber,supplierPartNumber:e.supplierPartNumber,warrantyDays:e.warrentyDays,modelNumber:e.modelNumber,weight:e.weight,description:e.description,image:e.productImage,currentStock:e.currentStock,reorderingQuantity:e.reorderingQuantity,minimumStock:e.minimumStock,maximumStock:e.maximumStock,labelFormat:e.labelFormat,packedByDate:e.packedByDate,useByDate:e.useByDate,sellByDate:e.sellByDate,lot:e.lot,notForSellingQuantity:e.notForSellingQuantity,isContainsAllergen:e.isContainsAllergen,isShowAllergenOnCart:e.isShowAllergenOnCart,isShowAllergenOnSecondaryDisplay:e.isShowAllergenOnSecondaryDispaly,isShowAllergenPopUp:e.isShowAllergenPopUp,rack:e.rack,row:e.row,position:e.position,frontLocation:e.frontLocation,backLocation:e.backLocation,pluCode:e.pluCode,salePrice:e.salePrice,turnOut:e.turnOut,productType:e.productType,baseUnit:e.baseUnit,transactionUnitMultiplier:e.transactionUnitMultiplier,saleAccount:e.saleAccount,saleDiscountAccount:e.saleDiscountAccount,isMaintainStock:e.isMaintainStock,inventoryAccount:e.inventoryAccount,purchasePrice:e.purchasePrice,expenseAccount:e.expenseAccount,purchaseDiscountAccount:e.purchaseDiscountAccount,foreignLanguageName:e.foriegnLanguageName,kitchenPrintDescription:e.kitchenPrintDescription,isActive:e.isActive,isTaxOnSale:e.isTaxOnSale,isTaxOnPurchase:e.isTaxOnPurchase,isMergeItem:e.isMergeItem,isAgeRestricted:e.isAgeRestricted,isPriceLevels:e.isPriceLevels,isOpenCustomizationWindow:e.isOpenCustomizationWindow,isPLUIsNegative:e.isPLUIsNegative,isCondimentPLU:e.isCondimentPLU,isEnableSELPrinting:e.isEnableSELPrinting,isOpenPricePLU:e.isOpenPricePLU,isOpenTextPLU:e.isOpenTextPLU,isExcludeFromDiscount:e.isExcludeFromDiscount,isExcludeServiceCharges:e.isExcludeServiceCharges,isSerialProduct:e.isSerialProduct,isShowPortionFront:e.isShowPortionFront,isAllow:e.isAllow,isAllowNegativeStock:e.isAllowNegativeStock,isUnitPriceOverride:e.isUnitPriceOverride,isNew:e.isNew,isUpdated:e.isUpdated,createdBy:e.createdBy,createdOn:e.createdOn,updatedBy:e.updatedBy,updatedOn:e.updatedOn})}static toJson(e){return{id:e.id,companyCode:e.companyId,locationId:e.locationId,terminalId:e.terminalId,brand:e.brandId,category:e.categoryId,subCategory:e.subCategoryId,group:e.groupId,department:e.departmentId,supplier:e.supplierId,productName:e.name,shortName:e.shortName,barcode:e.barCode,barcodeType:e.barCodeType,businessLocation:e.businessLocation,transactionUnit:e.transactionUnit,alertQuantity:e.alertQuantity,taxMethod:e.taxMethod,taxRate:e.taxRate,purchasePriceExcludingTax:e.purchasePriceExcludeTax,purchasePriceIncludingTax:e.purchasePriceIncludeTax,saleMargin:e.saleMargin,salePriceExcTax:e.salePriceExcludeTax,sku:e.sku,expiryDate:e.expiryDate,expiryAlertDays:e.expiryAlertDays,expiryAlertType:e.expiryAlertType,currentOffier:e.currentOffer,currentOfferSalePrice:e.currentOfferSalePrice,offerStartDate:e.offerStartDate,offerEndDate:e.offerEndDate,offerDays:e.offerDays,manufacturerPartNumber:e.manufacturerPartNumber,supplierPartNumber:e.supplierPartNumber,warrentyDays:e.warrantyDays,modelNumber:e.modelNumber,weight:e.weight,description:e.description,productImage:e.image,currentStock:e.currentStock,reorderingQuantity:e.reorderingQuantity,minimumStock:e.minimumStock,maximumStock:e.maximumStock,labelFormat:e.labelFormat,packedByDate:e.packedByDate,useByDate:e.useByDate,sellByDate:e.sellByDate,lot:e.lot,notForSellingQuantity:e.notForSellingQuantity,rack:e.rack,row:e.row,position:e.position,frontLocation:e.frontLocation,backLocation:e.backLocation,pluCode:e.pluCode,salePrice:e.salePrice,turnOut:e.turnOut,productType:e.productType,baseUnit:e.baseUnit,transactionUnitMultiplier:e.transactionUnitMultiplier,saleAccount:e.saleAccount,saleDiscountAccount:e.saleDiscountAccount,inventoryAccount:e.inventoryAccount,purchasePrice:e.purchasePrice,expenseAccount:e.expenseAccount,purchaseDiscountAccount:e.purchaseDiscountAccount,foriegnLanguageName:e.foreignLanguageName,kitchenPrintDescription:e.kitchenPrintDescription,isMaintainStock:e.isMaintainStock,isContainsAllergen:e.isContainsAllergen,isShowAllergenOnCart:e.isShowAllergenOnCart,isShowAllergenOnSecondaryDispaly:e.isShowAllergenOnSecondaryDisplay,isShowAllergenPopUp:e.isShowAllergenPopUp,isActive:e.isActive,isTaxOnSale:e.isTaxOnSale,isTaxOnPurchase:e.isTaxOnPurchase,isMergeItem:e.isMergeItem,isAgeRestricted:e.isAgeRestricted,isPriceLevels:e.isPriceLevels,isOpenCustomizationWindow:e.isOpenCustomizationWindow,isPLUIsNegative:e.isPLUIsNegative,isCondimentPLU:e.isCondimentPLU,isEnableSELPrinting:e.isEnableSELPrinting,isOpenPricePLU:e.isOpenPricePLU,isOpenTextPLU:e.isOpenTextPLU,isExcludeFromDiscount:e.isExcludeFromDiscount,isExcludeServiceCharges:e.isExcludeServiceCharges,isSerialProduct:e.isSerialProduct,isShowPortionFront:e.isShowPortionFront,isAllow:e.isAllow,isAllowNegativeStock:e.isAllowNegativeStock,isUnitPriceOverride:e.isUnitPriceOverride,isNew:e.isNew,isUpdated:e.isUpdated,createdBy:e.createdBy,createdOn:e.createdOn,updatedBy:e.updatedBy,updatedOn:e.updatedOn}}}class O{constructor({data:e,controls:m,loaded:p=!1,loading:y=!1,error:C=null}){this.data=e,this.controls=m,this.loaded=p,this.loading=y,this.error=C}}var o=(()=>{return(n=o||(o={}))[n.Brand=0]="Brand",n[n.Category=1]="Category",n[n.SubCategory=2]="SubCategory",n[n.Unit=3]="Unit",n[n.Group=4]="Group",n[n.Department=5]="Department",n[n.TaxRate=6]="TaxRate",n[n.Supplier=7]="Supplier",n[n.ImageGallery=8]="ImageGallery",o;var n})(),h=(()=>{return(n=h||(h={}))[n.Hours=0]="Hours",n[n.Days=1]="Days",h;var n})();const i={productName:"",barcode:"",barcodeType:"",isActive:!1,brand:0,category:0,subCategory:0,transactionUnit:0,productGroup:0,department:0,businessLocation:0,alertQuantity:0,taxMethod:0,taxRate:0,supplier:0,isTaxOnSale:!1,isTaxOnPurchase:!1,purchasePriceExcludingTax:0,purchasePriceIncludingTax:0,saleMargin:0,salePriceExcTax:0,isMergeItem:!1,isAgeRestricted:!1,isPriceLevels:!1,isOpenCustomizationWindow:!1,isPLUIsNegative:!1,isCondimentPLU:!1,isEnableSELPrinting:!1,isOpenPricePLU:!1,isOpenTextPLU:!1,isExcludeFromDiscount:!1,isExcludeServiceCharges:!1,isSerialProduct:!1,isShowPortionFront:!1,isAllow:!1,isAllowNegativeStock:!1,isUnitPriceOverride:!1,shortName:"",sku:"",expiryDate:new Date,expiryAlertDays:0,expiryAlertType:0,currentOffier:"",currentOfferSalePrice:0,offerStartDate:new Date,offerEndDate:new Date,offerDays:"",manufacturerPartNumber:"",supplierPartNumber:"",warrentyDays:0,modelNumber:"",weight:0,description:"",productImage:"",currentStock:0,reorderingQuantity:0,minimumStock:0,maximumStock:0,labelFormate:"",packedByDate:new Date,useByDate:new Date,sellByDate:new Date,lot:0,notForSellingQuantity:0,isContainsAllergen:!1,isShowAllergenOnCart:!1,isShowAllergenOnSecondaryDispaly:!1,isShowAllergenPopUp:!1,rack:"",row:"",position:"",frontLocation:0,backLocation:0,pluCode:"",salePrice:0,turnOut:"",productType:"",baseUnit:"",transactionUnitMultiplier:"",saleAccount:"",isMaintainStock:!1,inventoryAccount:"",purchasePrice:0,expenseAccount:"",purchaseDiscountAccount:0,foriegnLanguageName:"",kitchenPrintDescription:"",isNew:!1,isUpdated:!1,createdBy:"",createdOn:new Date,updatedBy:"",updatedOn:new Date}},7186:(U,v,l)=>{l.d(v,{H:()=>f});var g,_,d,c,a=l(4762),S=l(4499),O=l(2997),o=l(4753),h=l(7384),i=l(2835),D=l(8436),n=l(7038),e=l(5237),m=l(6404),p=l(3668),y=l(5873),C=l(6129),A=l(179),E=l(8881);class f{constructor(r,t,s,u){this.httpService=r,this.utilService=t,this.productService=s,this.lodashService=u,g.add(this),_.set(this,{}),d.set(this,[]),this.categories$=new S.X(new D.lk({data:(0,a.Q_)(this,d,"f"),controls:(0,a.Q_)(this,_,"f")})),this.selectedCategory=void 0,this.selectedCategory$=new S.X({item:void 0}),this.subCategories$=new S.X([])}get(){return(0,a.Q_)(this,d,"f").length?(0,O.of)((0,a.Q_)(this,d,"f")):((0,a.Q_)(this,g,"m",c).call(this,!0,!1),this.httpService.requestCell(m.i.categoryApiUrl(!0),e.m.GET).pipe((0,o.U)(({data:r})=>r.map(t=>D.LR.fromJson(t))),(0,o.U)(r=>this.lodashService.orderBy(r)),(0,h.b)(r=>{(0,a.YH)(this,d,r,"f"),(0,a.Q_)(this,g,"m",c).call(this)}),(0,i.K)(r=>{throw(0,a.Q_)(this,g,"m",c).call(this,!1,!1,r),r}),(0,n.d)()))}new(r){return this.httpService.requestCell(m.i.categoryApiUrl(),e.m.POST,r).pipe((0,o.U)(({data:t})=>D.LR.fromJson(t)),(0,h.b)(t=>{(0,a.Q_)(this,d,"f").unshift(t),(0,a.Q_)(this,g,"m",c).call(this)}))}bulkNew(r){return this.httpService.requestCell(m.i.categoryApiUrl(!1,!0),e.m.POST,r).pipe((0,o.U)(t=>{const s=[];return t.forEach(u=>{s.push(D.LR.fromJson(u.data))}),s}),(0,o.U)(t=>this.lodashService.orderBy(t,"asc")),(0,h.b)(t=>{t.forEach(s=>{(0,a.Q_)(this,d,"f").unshift(s)}),(0,a.Q_)(this,g,"m",c).call(this)}))}update(r){return this.httpService.requestCell(m.i.categoryApiUrl(),e.m.PUT,r).pipe((0,o.U)(({data:t})=>t),(0,h.b)(t=>{if(!t)return;const s=(0,a.Q_)(this,d,"f").findIndex(u=>u.id===r.id);(0,a.Q_)(this,d,"f")[s]=r,(0,a.Q_)(this,g,"m",c).call(this)}))}delete(r){return this.httpService.requestCell(m.i.categoryApiUrl(),e.m.DELETE,r.id).pipe((0,o.U)(({data:t})=>t),(0,h.b)(t=>{if(!t)return;const s=(0,a.Q_)(this,d,"f").findIndex(u=>u.id===r.id);(0,a.Q_)(this,d,"f").splice(s,1),(0,a.Q_)(this,g,"m",c).call(this)}))}selectCategory(r){this.selectedCategory=r,this.selectedCategory$.next({item:this.selectedCategory}),this.productService.selectedProduct$.next({product:void 0})}countTotalProductInsideCategory(r){return this.productService.products$.pipe((0,o.U)(({data:t})=>t.filter(s=>s.categoryId==r.id).length))}isCategoryHaveSubCategories(r){return this.getSubCategories(r).pipe((0,o.U)(t=>0!==t.length))}getSubCategories(r){return this.categories$.pipe((0,o.U)(({data:t})=>t.filter(s=>s.parentCategoryId==r.id)))}deleteCategory(r){this.productService.deleteCategoryProducts(r);const t=(0,a.Q_)(this,d,"f").indexOf(r);(0,a.Q_)(this,d,"f").splice(t,1),(0,a.Q_)(this,g,"m",c).call(this)}getSingleCategory(r){return(0,a.Q_)(this,d,"f").find(t=>t.id===r)}get mainCategories$(){return this.categories$.pipe((0,o.U)(({data:r})=>r.filter(t=>void 0===t.parentCategoryId||""===t.parentCategoryId)))}get firstCategory(){return(0,a.Q_)(this,d,"f")[0]}get categorySkeletonLoader$(){return(0,O.of)(Array(10).fill(""))}get isCategoriesEmpty$(){return this.categories$.pipe((0,o.U)(r=>!(r.data.length||!r.loaded)))}get isLoading$(){return this.categories$.pipe((0,o.U)(r=>!!r.loading))}get isCategoriesLoaded$(){return this.categories$.pipe((0,o.U)(r=>!!r.loaded))}}_=new WeakMap,d=new WeakMap,g=new WeakSet,c=function(r=!1,t=!0,s=null){this.categories$.next(new D.lk({data:(0,a.Q_)(this,d,"f"),controls:(0,a.Q_)(this,_,"f"),loaded:t,loading:r,error:s}))},f.\u0275fac=function(r){return new(r||f)(p.LFG(y.O),p.LFG(C.f),p.LFG(A.M),p.LFG(E.x))},f.\u0275prov=p.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})},179:(U,v,l)=>{l.d(v,{M:()=>P});var _,d,c,f,a=l(4762),S=l(4499),O=l(2997),o=l(4753),h=l(7384),i=l(2835),D=l(7038),n=l(8449),e=l(5237),m=l(862),p=l(6404),y=l(3668),C=l(5873),A=l(6129),E=l(4486),g=l(8881);class P{constructor(t,s,u,x){this.httpService=t,this.utilService=s,this.storageService=u,this.lodashService=x,_.add(this),d.set(this,{}),c.set(this,[]),this.products$=new S.X(new n.yo({data:(0,a.Q_)(this,c,"f"),controls:(0,a.Q_)(this,d,"f")})),this.selectedProduct$=new S.X({product:void 0}),this.editingProduct$=new S.X({product:void 0,isFormInvalid:!1}),this.productFormStatus$=new S.X({isSubmitting:!1}),this.selectedProduct=void 0}getAll(){return(0,a.Q_)(this,c,"f").length?((0,a.Q_)(this,_,"m",f).call(this),(0,O.of)((0,a.Q_)(this,c,"f"))):((0,a.Q_)(this,_,"m",f).call(this,!0,!1),this.httpService.requestCell(p.i.productApiUrl(!0),e.m.GET).pipe((0,o.U)(({data:t})=>t.map(s=>n.C1.fromJson(s))),(0,o.U)(t=>this.lodashService.orderBy(t)),(0,o.U)(t=>t.map(s=>this.addProductImageIfDoNotExits(s))),(0,h.b)(t=>{(0,a.YH)(this,c,t,"f"),(0,a.Q_)(this,_,"m",f).call(this),this.selectedProduct=t[0],this.selectedProduct$.next({product:this.selectedProduct}),this.editingProduct$.next({product:t[0],isFormInvalid:!1})}),(0,i.K)(t=>{throw(0,a.Q_)(this,_,"m",f).call(this,!1,!0,t),t}),(0,D.d)()))}new(t){return this.httpService.requestCell(p.i.productApiUrl(),e.m.POST,Object.assign(Object.assign({},P.productObj),t)).pipe((0,o.U)(({data:s})=>n.C1.fromJson(s)),(0,h.b)(s=>{(0,a.Q_)(this,c,"f").unshift(s),(0,a.Q_)(this,_,"m",f).call(this)}))}generateBarCode(){return this.httpService.requestCell(`${p.i.productApiUrl()}/GetNewBarcode`,e.m.GET)}getProductForCategory(t){return this.products$.pipe((0,o.U)(s=>s.data.filter(u=>u.categoryId==t)))}searchProducts(t){let s=[];(0,a.Q_)(this,c,"f").forEach(u=>{u.name.toLowerCase().includes(t.toLowerCase())&&s.push(u)}),this.products$.next(new n.yo({data:s,controls:(0,a.Q_)(this,d,"f")}))}selectProductForEdit(t){this.selectedProduct=t,this.selectedProduct$.next({product:this.selectedProduct}),this.editingProduct$.next({product:t,isFormInvalid:!1})}update(t){return this.httpService.requestCell(p.i.productApiUrl(),e.m.PUT,t).pipe((0,h.b)(({data:s})=>{if(s){const u=(0,a.Q_)(this,c,"f").findIndex(x=>x.id==t.id);this.productFormStatus$.next({isSubmitting:!1}),(0,a.Q_)(this,c,"f")[u]=t,(0,a.Q_)(this,_,"m",f).call(this)}}))}deleteProduct(t){return this.httpService.requestCell(p.i.productApiUrl(),e.m.DELETE,t.id).pipe((0,h.b)(()=>{this.selectedProduct&&this.selectedProduct.id==t.id&&(this.selectedProduct=void 0,this.selectedProduct$.next({product:this.selectedProduct}),this.editingProduct$.next({product:void 0,isFormInvalid:!1}));const s=(0,a.Q_)(this,c,"f").findIndex(u=>u.id==t.id);(0,a.Q_)(this,c,"f").splice(s,1),this.products$.next(new n.yo({data:(0,a.Q_)(this,c,"f"),controls:(0,a.Q_)(this,d,"f"),loaded:!0,loading:!1}))}))}deleteCategoryProducts(t){this.selectedProduct&&this.selectedProduct.categoryId==t.id&&(this.selectedProduct=void 0,this.selectedProduct$.next({product:this.selectedProduct}),this.editingProduct$.next({product:void 0,isFormInvalid:!1})),(0,a.YH)(this,c,(0,a.Q_)(this,c,"f").filter(s=>s.categoryId==t.id),"f"),this.products$.next(new n.yo({data:(0,a.Q_)(this,c,"f"),controls:(0,a.Q_)(this,d,"f"),loaded:!0,loading:!1}))}getTotalProductInsideCategory(t){return console.log("counting for category: ",t),this.products$.pipe((0,o.U)(({data:s})=>s.filter(u=>u.categoryId===t.id)))}get productSkeletonLoader$(){return(0,O.of)(Array(10).fill(""))}get isEmpty$(){return this.products$.pipe((0,o.U)(t=>!(t.data.length&&(null==t?void 0:t.loaded))))}get isLoading$(){return this.products$.pipe((0,o.U)(t=>!!(null==t?void 0:t.loading)))}get isLoaded$(){return this.products$.pipe((0,o.U)(t=>!!(null==t?void 0:t.loaded)))}get isSelected$(){return this.selectedProduct$.pipe((0,o.U)(t=>null!=t.product))}get isProductFormSubmitting$(){return this.productFormStatus$.pipe((0,o.U)(({isSubmitting:t})=>t))}addProductImageIfDoNotExits(t){let s=Object.assign(Object.assign({},t),{product_Image:[{fullUrl:"https://picsum.photos/200",alt:"demo image"}]});return this.lodashService.range(this.lodashService.random(1,5)).forEach((u,x)=>{var I;null===(I=s.product_Image)||void 0===I||I.push({fullUrl:`https://picsum.photos/${200+x+1}`,alt:"demo image"})}),s}static get productObj(){return{product_Name:"",barcode:"",barcode_Type:"",status:!1,brand:0,category:0,sub_Category:0,transaction_Unit:0,product_Group:0,department:0,business_Location:0,alert_Quantity:0,tax_Method:0,tax_Rate:0,supplier:0,tax_On_Sale:!1,tax_On_Purchase:!1,purchasePriceExcludingTax:0,purchasePriceIncludingTax:0,saleMargin:0,salePriceExcTax:0,merge_Item:!1,age_Restricted:!1,price_Levels:!1,open_Customization_Window:!1,plU_Is_Negative:!1,condiment_PLU:!1,enable_SEL_Printing:!1,open_Price_PLU:!1,open_Text_PLU:!1,exclude_From_Discount:!1,exclude_Service_Charges:!1,serial_Product:!1,show_Portion_Front:!1,allow:!1,allow_Negative_Stock:!1,unit_Price_Override:!1,short_Name:"",sku:"",expiry_Date:new Date,expiry_Alert_Days:0,expiry_Alert_Type:0,currentOffier:"",currentOfferSalePrice:0,offerStartDate:new Date,offerEndDate:new Date,offerDays:"",manufacturer_Part_Number:"",supplier_Part_Number:"",warrenty_Days:0,model_Number:"",weight:0,description:"",product_Image:"",current_Stock:0,reordering_Quantity:0,minimum_Stock:0,maximum_Stock:0,label_Formate:"",packed_By_Date:new Date,use_By_Date:new Date,sell_By_Date:new Date,lot:0,not_For_Selling_Quantity:0,contains_Allergen:!1,show_Allergen_On_Cart:!1,show_Allergen_On_Secondary_Dispaly:!1,show_Allergen_PopUp:!1,rack:"",row:"",position:"",front_Location:0,back_Location:0,plU_Code:"",sale_Price:0,yield:"",product_Type:"",base_Unit:"",transaction_Unit_Multiplier:"",sale_Account:"",maintain_Stock:!1,inventory_Account:"",purchase_Price:0,expense_Account:"",purchase_Discount_Account:0,foriegn_Language_Name:"",kitchen_Print_Description:"",isNew:!1,isUpdated:!1,createdBy:"",createdOn:new Date,updatedBy:"",updatedOn:new Date}}storeTableRowOrder(t){this.storageService.setItemToLocalStorage(m.B.ProductTableIds,this.lodashService.map(t,"id"))}getSortedProducts(t){let s=this.storageService.getItemFormLocalStorage(m.B.ProductTableIds);return null===s?(0,a.Q_)(this,c,"f"):this.lodashService.sortBy(t,"id",s)}}d=new WeakMap,c=new WeakMap,_=new WeakSet,f=function(t=!1,s=!0,u=null){this.products$.next(new n.yo({data:(0,a.Q_)(this,c,"f"),controls:(0,a.Q_)(this,d,"f"),loaded:s,loading:t,error:u}))},P.\u0275fac=function(t){return new(t||P)(y.LFG(C.O),y.LFG(A.f),y.LFG(E.V),y.LFG(g.x))},P.\u0275prov=y.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"})}}]);